{"version":3,"sources":["components/Header/Header.module.css","components/Login/Login.module.css","utils/objects-helpers.ts","api/users-api.ts","redux/users-reducer.ts","assets/img/gif-loader.svg","components/common/preloader/preloader.tsx","api/profile-api.ts","redux/profile-reducer.ts","redux/dialogs-reducer.ts","api/api.ts","components/common/FormsControls/FormControls.module.css","serviceWorker.js","api/auth-api.ts","api/security-apiI.ts","redux/auth-reducer.ts","components/Login/Login.tsx","redux/App-reducer.ts","redux/chat-reducer.ts","redux/redux-store.ts","components/Header/AppHeader.tsx","App.tsx","index.tsx","components/common/FormsControls/FormsControls.tsx","redux/selectors.ts","utils/validators/validators.ts"],"names":["module","exports","updateObjectInArray","items","itemId","objPropName","newObjProps","map","item","usersAPI","getUsers","currentPage","pageSize","term","isFriends","instance","get","then","res","data","follow","id","post","unFollow","delete","initialState","users","totalUsersCount","isFetching","followingInProgress","actions","userId","type","getUsersThunkCreator","filter","dispatch","a","totalCount","followUnfollow","apiMethod","actionCreator","resultCode","followThunkCreator","bind","unFollowThunkCreator","usersReducer","state","action","followed","Preloader","src","preloaderImg","alt","profileAPI","status","put","photo","formData","FormData","append","headers","newProfileData","posts","message","likeCounts","profile","addPostActionCreator","newPostBody","setUserProfile","setStatus","deletePost","postId","savePhotoSuccess","photos","getUsersProfileThunk","console","log","response","setStatusThunk","error","updateStatusThunk","savePhotoThunk","saveProfileThunk","getState","messages","auth","includes","fieldForError","slice","indexOf","length","toLowerCase","stopSubmit","contacts","Promise","reject","profileReducer","newPost","sendMessages","newMessage","dialogs","name","dialogsReducer","ResultCodesEnum","ResultCodeForCaptcha","axios","create","withCredentials","baseURL","Boolean","window","location","hostname","match","authAPI","email","password","rememberMe","captcha","securityAPI","login","isAuth","captchaUrl","payload","getAuthUserDataThunk","Success","getCaptchaUrl","url","authReducer","Login","useSelector","selectIsAuth","useDispatch","to","ReduxLoginForm","onSubmit","pass","CaptchaIsRequired","_error","catch","reduxForm","form","handleSubmit","selectCaptchaUrl","CreateField","required","Input","undefined","styles","fieldRememberMe","className","errorLogin","initialized","appReducer","chatReducer","reducers","combineReducers","profilePage","dialogsPage","usersPage","formReducer","app","chat","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","__store__","AppHeader","selectLogin","span","theme","mode","Item","classes","loginBlock","style","backgroundColor","icon","UserOutlined","title","onClick","SubMenu","Menu","Content","Layout","Footer","Sider","DialogsContainer","lazy","ProfileContainer","UsersPage","default","UserPageAuthRedirect","ChatPage","App","initialize","this","props","initializeApp","padding","width","defaultSelectedKeys","defaultOpenKeys","height","LaptopOutlined","minHeight","fallback","exact","from","path","render","textAlign","Component","AppContainer","withRouter","connect","ContainerApp","ReactRouterRoute","Route","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","FormControl","element","touched","hasError","Textarea","input","meta","placeholder","React","createElement","validators","component","additionalText","validate","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","getTerm","getIsFriends","value","requiredMaxLength","maxLength"],"mappings":"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","file":"static/js/main.71e38464.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginBlock\":\"Header_loginBlock__3w3ut\",\"login\":\"Header_login__19y_t\",\"title\":\"Header_title__3uuFq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldRememberMe\":\"Login_fieldRememberMe__LORPn\",\"errorLogin\":\"Login_errorLogin__11fzL\"};","export const updateObjectInArray = (\n  items: any,\n  itemId: any,\n  objPropName: any,\n  newObjProps: any\n) =>\n  items.map((item: any) => {\n    if (item[objPropName] === itemId) {\n      return { ...item, ...newObjProps };\n    }\n    return item;\n  });\n","import { GetItemsType, ResponseType, instance } from './api';\nimport { FilterGetUsersT } from '../redux/users-reducer';\n\nexport const usersAPI = {\n  getUsers(\n    currentPage: number,\n    pageSize: number,\n    { term, isFriends }: FilterGetUsersT\n  ) {\n    // здесь обращаемся теперь к instance\n    return instance\n      .get<GetItemsType>(\n        `users?page=${currentPage}&count=${pageSize}&friend=${isFriends}${\n          term === 'all' ? '' : `&term=${term}`\n        }`\n      )\n      .then((res) => res.data);\n  },\n  follow(id: number) {\n    return instance.post<ResponseType>(`follow/${id}`).then((res) => res.data);\n  },\n  unFollow(id: number) {\n    return instance\n      .delete<ResponseType>(`follow/${id}`)\n      .then((res) => res.data);\n  },\n};\n","import { Dispatch } from 'redux';\nimport { updateObjectInArray } from '../utils/objects-helpers';\nimport { UserType } from '../types/types';\nimport { BaseThunkType, InferActionsTypes } from './redux-store';\nimport { usersAPI } from '../api/users-api';\nimport { ResponseType } from '../api/api';\n\nconst initialState = {\n  users: [] as Array<UserType>,\n  pageSize: 5,\n  totalUsersCount: 0, // количество пользователей\n  currentPage: 1,\n  isFetching: true, // загрузка идёт если тру\n  followingInProgress: [] as Array<number>, // массив айдишек пользователь\n  term: '',\n  isFriends: 'all' as FilterGetUsersT['isFriends'],\n};\n\nconst usersReducer = (\n  state = initialState,\n  action: ActionsTypes\n): InitialUsersState => {\n  // debugger;\n  switch (action.type) {\n    // TODO благодаря case ts показывает точное содержание экшена, то есть для каждого кейса он свой\n    case 'USERS/FOLLOW': {\n      return {\n        ...state,\n        // здесь не нужно копировать потому что map возвращает новый массив\n        users: updateObjectInArray(state.users, action.userId, 'id', {\n          followed: true,\n        }),\n      };\n    }\n    case 'USERS/UNFOLLOW': {\n      return {\n        ...state,\n        users: updateObjectInArray(state.users, action.userId, 'id', {\n          followed: false,\n        }),\n      };\n    }\n    case 'USERS/SET_USERS': {\n      return { ...state, users: action.users };\n    }\n    case 'USERS/SET_CURRENT_PAGE': {\n      return { ...state, currentPage: action.currentPage };\n    }\n    case 'USERS/SET_TOTAL_USERS_COUNT': {\n      return { ...state, totalUsersCount: action.totalUsersCount };\n    }\n    case 'USERS/TOGGLE_IS_FETCHING': {\n      return { ...state, isFetching: action.isFetching };\n    }\n    case 'USERS/TOGGLE_IS_FOLLOWING_PROGRESS': {\n      return {\n        ...state,\n        followingInProgress: action.isFetching // если action.isFetching === true\n          ? [...state.followingInProgress, action.userId]\n          : state.followingInProgress.filter(\n              (id) => id !== action.userId // возвращает все id которые не равны пользователю на которого подписываются\n              // поэтому в метод some в Users вернёт false когда запрос будет выполнен\n            ),\n      };\n    }\n    case 'USERS/SET_TERM_AND_FRIENDS': {\n      return {\n        ...state,\n        term: action.term,\n        isFriends: action.isFriends,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const actions = {\n  // обязательно ставим as const, это определяет тип точнее, то есть type: 'UNFOLLOW' будет не просто строка,\n  // а - именно UNFOLLOW и это не даст ошибиться в case в редьюсере и не нужно создавать под тип отдельную переменную\n  unFollowCreator: (userId: number) =>\n    ({ type: 'USERS/UNFOLLOW', userId } as const),\n  followCreator: (userId: number) =>\n    ({ type: 'USERS/FOLLOW', userId } as const),\n  setUsersCreator: (users: Array<UserType>) =>\n    ({ type: 'USERS/SET_USERS', users } as const),\n  setCurrentPageCreator: (currentPage: number) =>\n    ({ type: 'USERS/SET_CURRENT_PAGE', currentPage } as const),\n  setUsersTotalCountCreator: (totalUsersCount: number) =>\n    ({\n      type: 'USERS/SET_TOTAL_USERS_COUNT',\n      totalUsersCount,\n    } as const),\n  toggleIsFetchingCreator: (isFetching: boolean) =>\n    ({\n      type: 'USERS/TOGGLE_IS_FETCHING',\n      isFetching,\n    } as const),\n  toggleIsFollowingProgressCR: (isFetching: boolean, userId: number) =>\n    ({\n      type: 'USERS/TOGGLE_IS_FOLLOWING_PROGRESS',\n      isFetching,\n      userId,\n    } as const),\n  setTermAndFriends: (\n    isFriends: FilterGetUsersT['isFriends'] = 'all',\n    term: string\n  ) =>\n    ({\n      type: 'USERS/SET_TERM_AND_FRIENDS',\n      isFriends,\n      term,\n    } as const),\n};\n\n// TODO: Ниже идут создатели санок\n// Первая функция - создатель санки, вторая функция - это санка, в которую передаётся dispatch и прочие аргументы\nexport const getUsersThunkCreator =\n  (currentPage: number, pageSize: number, filter: FilterGetUsersT): ThunkType =>\n  async (dispatch) => {\n    // идёт выбор нужной страницы пользователей для отображения\n    dispatch(actions.setCurrentPageCreator(currentPage));\n    // если идёт загрузка то работает прелоадер, здесь мы помечаем что идёт загрузка!\n    dispatch(actions.toggleIsFetchingCreator(true));\n    // Получаем всех юзеров getUsers лежит в api\n    const data = await usersAPI.getUsers(currentPage, pageSize, filter);\n    // здесь мы помечаем что загрузка окончена\n    dispatch(actions.toggleIsFetchingCreator(false));\n    dispatch(actions.setUsersCreator(data.items));\n    // получаем количество страниц\n    dispatch(actions.setUsersTotalCountCreator(data.totalCount));\n    // dispatch(actions.setTerm(filter.term));\n    dispatch(actions.setTermAndFriends(filter.isFriends, filter.term));\n  };\n\n// Dispatch<ActionsType> - еще один способ типизации диспатча\nconst followUnfollow = async (\n  dispatch: Dispatch<ActionsTypes>,\n  userId: number,\n  apiMethod: (useId: number) => Promise<ResponseType>,\n  actionCreator: (\n    userId: number\n  ) => ReturnType<typeof actions.followCreator | typeof actions.unFollowCreator>\n) => {\n  dispatch(actions.toggleIsFollowingProgressCR(true, userId));\n\n  const data = await apiMethod(userId);\n\n  if (data.resultCode === 0) dispatch(actionCreator(userId));\n\n  dispatch(actions.toggleIsFollowingProgressCR(false, userId));\n};\n\nexport const followThunkCreator =\n  (userId: number): ThunkType =>\n  async (dispatch) => {\n    await followUnfollow(\n      dispatch,\n      userId,\n      usersAPI.follow.bind(usersAPI),\n      actions.followCreator\n    );\n  };\n\nexport const unFollowThunkCreator =\n  (userId: number): ThunkType =>\n  async (dispatch) => {\n    await followUnfollow(\n      dispatch,\n      userId,\n      usersAPI.unFollow.bind(usersAPI),\n      actions.unFollowCreator\n    );\n  };\n\n// types\nexport type InitialUsersState = typeof initialState;\ntype ActionsTypes = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsTypes>;\nexport type FilterGetUsersT = {\n  term: string;\n  isFriends: 'all' | 'true' | 'false';\n};\n\nexport default usersReducer;\n","export default __webpack_public_path__ + \"static/media/gif-loader.1799ddc2.svg\";","import React from 'react';\nimport preloaderImg from '../../../assets/img/gif-loader.svg';\n\nconst Preloader: React.FC<{ isFetching?: boolean }> = ({ isFetching }) => (\n  <div>{isFetching ? <img src={preloaderImg} alt=\"preloader\" /> : null}</div>\n);\nexport default Preloader;\n","import { PhotosType, ProfileType } from '../types/types';\nimport { instance, ResponseType } from './api';\n\ntype SavePhotoResponseDataType = {\n  photos: PhotosType;\n};\n\nexport const profileAPI = {\n  getProfile(userId: number) {\n    return instance\n      .get<ProfileType>(`profile/${userId}`)\n      .then((res) => res.data);\n  },\n  getStatus(userId: number) {\n    return instance\n      .get<string>(`profile/status/${userId}`)\n      .then((res) => res.data);\n  },\n  updateStatus(status: string) {\n    return instance\n      .put<ResponseType>('profile/status', { status })\n      .then((res) => res.data);\n  },\n  savePhoto(photo: File) {\n    const formData = new FormData();\n    formData.append('image', photo);\n    return instance\n      .put<ResponseType<SavePhotoResponseDataType>>('profile/photo', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .then((res) => res.data);\n  },\n  saveProfile(newProfileData: ProfileType) {\n    return instance.put('profile', newProfileData).then((res) => res.data);\n  },\n};\n","import { stopSubmit, FormAction } from 'redux-form';\nimport { PostsType, PhotosType, ProfileType } from '../types/types';\nimport { BaseThunkType, InferActionsTypes } from './redux-store';\nimport { profileAPI } from '../api/profile-api';\n\nconst initialState = {\n  posts: [\n    { id: 1, message: 'Hi', likeCounts: 21 },\n    { id: 2, message: 'How a u', likeCounts: 22 },\n    { id: 3, message: 'Yo', likeCounts: 23 },\n  ] as Array<PostsType>,\n  profile: null as ProfileType | null,\n  status: '',\n};\n\nconst profileReducer = (\n  state = initialState,\n  action: ActionsTypes\n): InitialProfileStateType => {\n  // Редакс работает только с копией экземпляра объекта, поэтому мы его копируем\n  switch (action.type) {\n    case 'profile/ADD_POST': {\n      const newPost = {\n        id: state.posts.length + 1,\n        message: action.newPostBody,\n        likeCounts: 0,\n      };\n      return {\n        ...state,\n        posts: [newPost, ...state.posts] as Array<PostsType>, // Убрать as ProfileType\n      };\n    }\n    case 'profile/SET_USER_PROFILE': {\n      return { ...state, profile: action.profile };\n    }\n    case 'profile/SET_STATUS': {\n      return {\n        ...state,\n        status: action.status,\n      };\n    }\n    case 'profile/DELETE_POST': {\n      return {\n        ...state,\n        posts: state.posts.filter((post) => post.id !== action.postId),\n      };\n    }\n    case 'profile/SAVE_PHOTO_SUCCESS': {\n      return {\n        ...state,\n        profile: { ...state.profile, photos: action.photos } as ProfileType, // Убрать as ProfileType\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport const actions = {\n  addPostActionCreator: (newPostBody: PostsType) =>\n    ({\n      type: 'profile/ADD_POST',\n      newPostBody,\n    } as const),\n  setUserProfile: (profile: ProfileType) =>\n    ({ type: 'profile/SET_USER_PROFILE', profile } as const),\n  setStatus: (status: string) =>\n    ({ type: 'profile/SET_STATUS', status } as const),\n  deletePost: (postId: number) =>\n    ({ type: 'profile/DELETE_POST', postId } as const),\n  savePhotoSuccess: (photos: PhotosType) =>\n    ({ type: 'profile/SAVE_PHOTO_SUCCESS', photos } as const),\n};\n\n// thunks\nexport const getUsersProfileThunk =\n  (userId: number): ThunkType =>\n  async (dispatch) => {\n    console.log('getUsersProfileThunk');\n    const response = await profileAPI.getProfile(userId);\n    dispatch(actions.setUserProfile(response));\n  };\nexport const setStatusThunk =\n  (userId: number): ThunkType =>\n  async (dispatch) => {\n    try {\n      const response = await profileAPI.getStatus(userId);\n      dispatch(actions.setStatus(response));\n    } catch (e) {\n      console.error(e);\n    }\n  };\nexport const updateStatusThunk =\n  (status: string): ThunkType =>\n  async (dispatch) => {\n    try {\n      const response = await profileAPI.updateStatus(status);\n      response.resultCode === 0 && dispatch(actions.setStatus(status));\n    } catch (e) {\n      console.error(e);\n    }\n  };\nexport const savePhotoThunk =\n  (photo: File): ThunkType =>\n  async (dispatch) => {\n    const response = await profileAPI.savePhoto(photo);\n    response.resultCode === 0 &&\n      dispatch(actions.savePhotoSuccess(response.data.photos));\n  };\n\nexport const saveProfileThunk =\n  (newProfileData: ProfileType): ThunkType =>\n  async (dispatch, getState) => {\n    const { resultCode, messages } = await profileAPI.saveProfile(\n      newProfileData\n    );\n    if (resultCode === 0) {\n      const { userId } = getState().auth;\n      userId && (await dispatch(getUsersProfileThunk(userId)));\n      return true;\n    }\n    if (messages[0].includes('Invalid url')) {\n      // достаю из сообщения ошибки нужную часть строки для контактов\n      const fieldForError = messages[0]\n        .slice(messages[0].indexOf('>') + 1, messages[0].length - 1)\n        .toLowerCase();\n      dispatch(\n        stopSubmit('profileEdit', {\n          contacts: { [fieldForError]: 'Не правильный адрес контакта' },\n        })\n      );\n    } else {\n      // достаю ошибку для обязательных полей\n      let fieldForError = messages[0].slice(\n        messages[0].indexOf('(') + 1,\n        messages[0].length - 1\n      );\n      fieldForError = fieldForError[0].toLowerCase() + fieldForError.slice(1);\n      dispatch(\n        stopSubmit('profileEdit', { [fieldForError]: 'Обязательное поле' })\n      );\n      // реджект промиса чтобы не запускать setEditMode(false) на странице редактирования профиля\n    }\n    return Promise.reject(messages[0]);\n  };\n\n// types\nexport type InitialProfileStateType = typeof initialState;\ntype ActionsTypes = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsTypes | FormAction>;\n\nexport default profileReducer;\n","import { InferActionsTypes } from './redux-store';\n\nexport const actions = {\n  sendMessages: (newMessage: string) =>\n    ({ type: 'dialogs/SEND-MESSAGE', newMessage } as const),\n};\n\nexport type InitialStateType = typeof initialState;\n\nlet initialState = {\n  messages: [\n    { id: 1, message: 'Hi' },\n    { id: 2, message: 'How a u' },\n    { id: 3, message: 'Yo' },\n    { id: 4, message: 'Yo' },\n  ] as Array<DialogsType>,\n  dialogs: [\n    { id: 1, name: 'Roman' },\n    { id: 2, name: 'Ilya' },\n    { id: 3, name: 'Anton' },\n    { id: 4, name: 'Andrey' },\n  ] as MessagesType[],\n};\n\nconst dialogsReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialStateType => {\n  let stateCopy;\n  switch (action.type) {\n    case 'dialogs/SEND-MESSAGE': {\n      const newMessage = {\n        id: state.messages.length + 1,\n        message: action.newMessage,\n      };\n      // Редакс работает только с копией экземпляра объекта, поэтому мы его копируем\n      stateCopy = {\n        ...state,\n        // Порядок копии имеет значение, сначала мы копируем стайт,а потом уже глубже - сообщения\n        // let stateCopy = {messages:[...state.messages], ...state} - не правильно, messages перезапишется и будет только ссылкой на оригинал\n        // Аналог пушь, через запитую в спрэд операторе указать что хочешь добавить (newMessage),также можно добавить его в начало\n        messages: [...state.messages, newMessage],\n      };\n      // stateCopy.messages.push(newMessage);\n      // stateCopy.newMessageBody = '';\n      return stateCopy;\n    }\n    default:\n      return state;\n  }\n};\n\n// types\ntype DialogsType = {\n  id: number;\n  message: string;\n};\nexport type MessagesType = {\n  id: number;\n  name: string;\n};\ntype ActionsType = InferActionsTypes<typeof actions>;\n\nexport default dialogsReducer;\n","import axios from 'axios';\nimport { UserType } from '../types/types';\n\n// конфигурация для axios запросов чтобы всегда её не писать\nexport const instance = axios.create({\n  withCredentials: true,\n  // baseURL автомат. будет прикреплятся к началу строки\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\n  headers: {\n    'API-KEY': '42365f1f-0720-4a06-bd3a-f68d51e54a78',\n  },\n});\n\nexport enum ResultCodesEnum {\n  Success = 0,\n  Error = 1,\n}\nexport enum ResultCodeForCaptcha {\n  CaptchaIsRequired = 10,\n}\n\nexport type GetItemsType = {\n  items: Array<UserType>;\n  totalCount: number;\n  error: string | null;\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type ResponseType<D = object, RC = ResultCodesEnum> = {\n  data: D;\n  messages: Array<string>;\n  resultCode: RC;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__1P421\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      // eslint-disable-next-line no-param-reassign\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  instance,\n  ResponseType,\n  ResultCodeForCaptcha,\n  ResultCodesEnum,\n} from './api';\n\ntype MeResponseDataType = {\n  id: number;\n  email: string;\n  login: string;\n};\ntype LoginResponseDataType = {\n  userId: number;\n};\n\nexport const authAPI = {\n  me() {\n    // get<MeResponseType> - делая запрос мы ожидаем получить объект типа MeResponseType\n    return instance\n      .get<ResponseType<MeResponseDataType>>('auth/me')\n      .then((res) => res.data);\n  },\n  login(\n    email: string,\n    password: string,\n    rememberMe = false,\n    captcha: null | string = null\n  ) {\n    return instance.post<\n      ResponseType<\n        LoginResponseDataType,\n        ResultCodeForCaptcha | ResultCodesEnum\n      >\n    >('auth/login', {\n      email,\n      password,\n      rememberMe,\n      captcha,\n    });\n  },\n  // TODO: При зазлогине возвращаеться пустая дата\n  logout() {\n    return instance.delete<ResponseType>('auth/login');\n  },\n};\n","import { instance } from './api';\n\ntype GetCaptchaUrlResponseType = {\n  url: string;\n};\n\nexport const securityAPI = {\n  getCaptcha() {\n    return instance\n      .get<GetCaptchaUrlResponseType>('security/get-captcha-url')\n      .then((data) => data);\n  },\n};\n","import { FormAction, stopSubmit } from 'redux-form';\nimport { ResultCodesEnum, ResultCodeForCaptcha } from '../api/api';\nimport { BaseThunkType, InferActionsTypes } from './redux-store';\nimport { authAPI } from '../api/auth-api';\nimport { securityAPI } from '../api/security-apiI';\n\nconst initialState = {\n  userId: null as number | null,\n  email: null as string | null,\n  login: null as string | null,\n  isAuth: false,\n  captchaUrl: null as string | null,\n};\n\nconst authReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialAuthStateType => {\n  switch (action.type) {\n    case 'auth/SET_USER_DATA': {\n      return {\n        ...state,\n        // в action.data лежат userId, email, login, поэтому он их перезапишет\n        ...action.payload,\n      };\n    }\n    case 'auth/SET_CAPTCHA_URL_SUCCESS': {\n      return {\n        ...state,\n        captchaUrl: action.payload,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst actions = {\n  setAuthUserData: (\n    userId: number | null,\n    email: string | null,\n    login: string | null,\n    isAuth: boolean\n  ) =>\n    ({\n      type: 'auth/SET_USER_DATA',\n      payload: { userId, email, login, isAuth },\n    } as const),\n  getCaptchaUrlSuccess: (captchaUrl: string) =>\n    ({\n      type: 'auth/SET_CAPTCHA_URL_SUCCESS',\n      payload: captchaUrl,\n    } as const),\n};\n\n// thunks\nexport const getAuthUserDataThunk = (): ThunkType => async (dispatch) => {\n  const {\n    resultCode,\n    data: { id, email, login },\n  } = await authAPI.me();\n  if (resultCode === ResultCodesEnum.Success) {\n    dispatch(actions.setAuthUserData(id, email, login, true));\n  }\n  // асинхронная функции возвращает промис\n};\n\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\n  const { data } = await securityAPI.getCaptcha();\n  dispatch(actions.getCaptchaUrlSuccess(data.url));\n};\nexport const login =\n  (\n    email: string,\n    pass: string,\n    rememberMe: boolean,\n    captcha: string\n  ): ThunkType =>\n  async (dispatch) => {\n    const { data } = await authAPI.login(email, pass, rememberMe, captcha);\n    if (data.resultCode === ResultCodesEnum.Success) {\n      dispatch(getAuthUserDataThunk());\n      return true;\n    }\n    if (data.resultCode === ResultCodeForCaptcha.CaptchaIsRequired) {\n      dispatch(getCaptchaUrl());\n    }\n    // _error создаёт параметр error который прокидывается в форму login\n    const message = data.messages.length > 0 ? data.messages[0] : 'Some error';\n    dispatch(stopSubmit('login', { _error: message }));\n    return Promise.reject(message);\n  };\nexport const logout = (): ThunkType => async (dispatch) => {\n  const { data } = await authAPI.logout();\n  if (data.resultCode === ResultCodesEnum.Success) {\n    dispatch(actions.setAuthUserData(null, null, null, false));\n  }\n};\n\n// types\nexport type InitialAuthStateType = typeof initialState;\ntype ActionsType = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\n\nexport default authReducer;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { InjectedFormProps, reduxForm } from 'redux-form';\nimport {\n  CreateField,\n  GetStringKeys,\n  Input,\n} from '../common/FormsControls/FormsControls';\nimport { required } from '../../utils/validators/validators';\nimport { login, getCaptchaUrl } from '../../redux/auth-reducer';\nimport styles from './Login.module.css';\nimport { selectCaptchaUrl, selectIsAuth } from '../../redux/selectors';\n\n// Login: React.FC<mapStatePropsType> - компонента принимает аргументы mapStatePropsType\nexport const Login: React.FC = () => {\n  const isAuth = useSelector(selectIsAuth);\n  const dispatch = useDispatch();\n  const onSubmit = (formData: LoginFormValuesType) => {\n    // TODO: не пойму как тут обозначить типы для Promise.reject(message)\n    dispatch(\n      login(\n        formData.email,\n        formData.password,\n        formData.rememberMe,\n        formData.captcha\n      ) as unknown as Promise<any>\n    ).catch((error) => {\n      // при ошибке входа спрашивает капчу\n      dispatch(getCaptchaUrl());\n      console.error(error);\n    });\n  };\n  if (isAuth) {\n    return <Redirect to=\"/profile\" />;\n  }\n  return (\n    <div>\n      <h1>Login</h1>\n      {/* onSubmit={onAddPost} - Автоматически прокидывает этот сабмит в handleSubmit(обязательно имя onSubmit) */}\n      <ReduxLoginForm onSubmit={onSubmit} />\n    </div>\n  );\n};\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType>> = ({\n  handleSubmit,\n  error,\n  // captchaUrl\n}) => {\n  const captchaUrl = useSelector(selectCaptchaUrl);\n  return (\n    <form onSubmit={handleSubmit}>\n      {CreateField<LoginFormValuesTypeKeys>('Name', 'email', [required], Input)}\n      {CreateField<LoginFormValuesTypeKeys>(\n        'Password',\n        'password',\n        [required],\n        Input,\n        {\n          type: 'password',\n        }\n      )}\n      {CreateField<LoginFormValuesTypeKeys>(\n        undefined,\n        'rememberMe',\n        [],\n        Input,\n        { type: 'checkbox' },\n        'Remember me',\n        styles.fieldRememberMe\n      )}\n      {captchaUrl && (\n        <div>\n          <img src={captchaUrl} alt=\"captcha\" />\n          {CreateField<LoginFormValuesTypeKeys>(\n            'Enter captcha',\n            'captcha',\n            [required],\n            Input\n          )}\n        </div>\n      )}\n      {error && <div className={styles.errorLogin}>{error}</div>}\n      <div>\n        <button type=\"submit\">Login</button>\n      </div>\n    </form>\n  );\n};\nconst ReduxLoginForm = reduxForm<LoginFormValuesType>({ form: 'login' })(\n  LoginForm\n);\n\n// Types\ntype LoginFormValuesType = {\n  email: string;\n  password: string;\n  rememberMe: boolean;\n  captcha: string;\n};\n\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormValuesType>;\n","import { ThunkAction } from 'redux-thunk';\nimport { getAuthUserDataThunk } from './auth-reducer';\nimport { AppStateType, InferActionsTypes } from './redux-store';\n\nconst initialState = {\n  initialized: false,\n};\n\nconst appReducer = (\n  state = initialState,\n  action: ActionsTypes\n): InitialAppStateType => {\n  // debugger;\n  switch (action.type) {\n    case 'app/INITIALIZED_SUCCESS': {\n      return {\n        ...state,\n        initialized: true,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst actions = {\n  initializedSuccess: () => ({ type: 'app/INITIALIZED_SUCCESS' } as const),\n};\n\n// thunks\nexport const initializeApp = (): InitializeAppType => async (dispatch) => {\n  await dispatch(getAuthUserDataThunk());\n  dispatch(actions.initializedSuccess());\n};\n\n// types\nexport type InitialAppStateType = typeof initialState;\ntype ActionsTypes = InferActionsTypes<typeof actions>;\ntype InitializeAppType = ThunkAction<\n  Promise<void>,\n  AppStateType,\n  any,\n  ActionsTypes\n>;\n\nexport default appReducer;\n","import { FormAction } from 'redux-form';\nimport { securityAPI } from '../api/security-apiI';\nimport { ChatMessageType } from '../pages/Chat/ChatPage';\nimport { BaseThunkType, InferActionsTypes } from './redux-store';\n\nconst initialState = {\n  messages: [] as ChatMessageType[],\n};\n\nconst chatReducer = (\n  state = initialState,\n  action: ActionsType\n): InitialAuthStateType => {\n  switch (action.type) {\n    case 'auth/SET_CAPTCHA_URL_SUCCESS': {\n      return state;\n    }\n    default:\n      return state;\n  }\n};\n\nconst actions = {\n  getCaptchaUrlSuccess: (captchaUrl: string) =>\n    ({\n      type: 'auth/SET_CAPTCHA_URL_SUCCESS',\n      payload: captchaUrl,\n    } as const),\n};\n\n// thunks\n\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\n  const { data } = await securityAPI.getCaptcha();\n  dispatch(actions.getCaptchaUrlSuccess(data.url));\n};\n\n// types\nexport type InitialAuthStateType = typeof initialState;\ntype ActionsType = InferActionsTypes<typeof actions>;\ntype ThunkType = BaseThunkType<ActionsType | FormAction>;\n\nexport default chatReducer;\n","import {\n  applyMiddleware,\n  combineReducers,\n  createStore,\n  compose,\n  Action,\n} from 'redux';\nimport thunkMiddleWare, { ThunkAction } from 'redux-thunk';\nimport { reducer as formReducer } from 'redux-form';\nimport profileReducer from './profile-reducer';\nimport dialogsReducer from './dialogs-reducer';\nimport usersReducer from './users-reducer';\nimport authReducer from './auth-reducer';\nimport appReducer from './App-reducer';\nimport chatReducer from './chat-reducer';\n\nconst reducers = combineReducers({\n  profilePage: profileReducer,\n  dialogsPage: dialogsReducer,\n  usersPage: usersReducer,\n  auth: authReducer,\n  form: formReducer,\n  app: appReducer,\n  chat: chatReducer,\n});\n\ntype RootReducerType = typeof reducers; // (globalstate: AppStateType) => AppStateType - это тип функции\nexport type AppStateType = ReturnType<RootReducerType>; // возвращает из функции тип всего стэйта\n\n// TODO: универсальное определение типов экшинов\nexport type InferActionsTypes<T> = T extends {\n  [key: string]: (...args: Array<any>) => infer U;\n}\n  ? U\n  : never;\n\n// TODO: универсальная типизация санок\n// ThunkAction - очень крутая типизация ts если используется getState и санка что-то возвращает + extraArgument(пока не знаю что это)\nexport type BaseThunkType<\n  A extends Action,\n  R = Promise<void | true>\n> = ThunkAction<R, AppStateType, unknown, A>;\n\n// TODO: подключение расширение редакс для браузера\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(thunkMiddleWare))\n);\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line no-underscore-dangle\nwindow.__store__ = store;\n\nexport default store;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Avatar, Button, Col, Menu, Row } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport { Header } from 'antd/es/layout/layout';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classes from './Header.module.css';\nimport { selectIsAuth, selectLogin } from '../../redux/selectors';\nimport { logout } from '../../redux/auth-reducer';\n\nexport const AppHeader: React.FC = () => {\n  const login = useSelector(selectLogin);\n  const isAuth = useSelector(selectIsAuth);\n  const dispatch = useDispatch();\n  const onLogout = () => {\n    dispatch(logout());\n  };\n  return (\n    <Header className=\"header\">\n      <Row>\n        <Col span={20}>\n          <Menu theme=\"dark\" mode=\"horizontal\">\n            <Menu.Item key=\"1\">\n              <Link to=\"/users\">Users</Link>\n            </Menu.Item>\n          </Menu>\n        </Col>\n        <Col span={4} className={classes.loginBlock}>\n          {isAuth ? (\n            <div className={classes.login}>\n              <Avatar\n                alt={login || ''}\n                style={{ backgroundColor: '#87d068' }}\n                icon={<UserOutlined />}\n              />\n              <div className={classes.title}>{login}</div>\n              <Button type=\"primary\" onClick={onLogout}>\n                Log out\n              </Button>\n            </div>\n          ) : (\n            <Button>\n              <Link to=\"/login\">Login</Link>\n            </Button>\n          )}\n        </Col>\n      </Row>\n    </Header>\n  );\n};\n","import React, { Component, ComponentType, FC, lazy, Suspense } from 'react';\nimport './App.css';\nimport { connect, Provider } from 'react-redux';\nimport { compose } from 'redux';\nimport {\n  BrowserRouter,\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  withRouter,\n} from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport { Layout, Menu } from 'antd';\nimport { LaptopOutlined, UserOutlined } from '@ant-design/icons';\n\nimport { Login } from './components/Login/Login';\nimport { initializeApp } from './redux/App-reducer';\nimport Preloader from './components/common/preloader/preloader';\nimport store, { AppStateType } from './redux/redux-store';\nimport { AppHeader } from './components/Header/AppHeader';\n\nconst { SubMenu } = Menu;\nconst { Content, Footer, Sider } = Layout;\n\nconst DialogsContainer = lazy(\n  () => import('./components/Dialogs/DialogsContainer')\n);\nconst ProfileContainer = lazy(\n  () => import('./components/Profile/ProfileContainer')\n);\nconst UsersPage = lazy(() =>\n  import('./components/Users/UsersPage').then(({ UserPageAuthRedirect }) => ({\n    default: UserPageAuthRedirect,\n  }))\n);\nconst ChatPage = lazy(() =>\n  import('./pages/Chat/ChatPage').then((module) => ({\n    default: module.ChatPage,\n  }))\n);\n\n// App - компонента, возвращающая jsx. В validators.ts обозначается как тег <App />\nclass App extends Component<PropsType & DispatchPropsType> {\n  componentDidMount() {\n    const { initializeApp: initialize } = this.props;\n    initialize();\n    // window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors);\n  }\n\n  // componentWillUnmount() {\n  //   window.removeEventListener(\n  //     'unhandledrejection',\n  //     this.catchAllUnhandledErrors\n  //   );\n  // }\n\n  // catchAllUnhandledErrors = () => {\n  //   alert('Some error occurred');\n  // };\n\n  render() {\n    const { initialized } = this.props;\n    if (!initialized) return <Preloader />;\n    return (\n      <Layout>\n        <AppHeader />\n        <Content style={{ padding: '0 50px' }}>\n          <Layout\n            className=\"site-layout-background\"\n            style={{ padding: '24px 0' }}\n          >\n            <Sider className=\"site-layout-background\" width={200}>\n              <Menu\n                mode=\"inline\"\n                defaultSelectedKeys={['1']}\n                defaultOpenKeys={['sub1']}\n                style={{ height: '100%' }}\n              >\n                <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"My Profile\">\n                  <Menu.Item key=\"1\">\n                    <Link to=\"/profile\">Profile</Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"2\">\n                    <Link to=\"/dialogs\">Messages</Link>\n                  </Menu.Item>\n                </SubMenu>\n                <SubMenu\n                  key=\"sub2\"\n                  icon={<LaptopOutlined />}\n                  title=\"Developers\"\n                >\n                  <Menu.Item key=\"3\">\n                    <Link to=\"/users\">Users</Link>\n                  </Menu.Item>\n                  <Menu.Item key=\"4\">\n                    <Link to=\"/chat\">Chat</Link>\n                  </Menu.Item>\n                </SubMenu>\n              </Menu>\n            </Sider>\n            <Content style={{ padding: '0 24px', minHeight: 280 }}>\n              <Suspense fallback={<div>Loading...</div>}>\n                {/* Route следит за изменением пути, switch указывает точный путь */}\n                <Switch>\n                  <Redirect exact from=\"/\" to=\"/profile\" />\n                  <Route\n                    // указывает userId(можно назвать как хочешь) что бы в params вытащить id\n                    path=\"/profile/:userId?\"\n                    render={() => <ProfileContainer />}\n                  />\n                  <Route path=\"/dialogs\" render={() => <DialogsContainer />} />\n                  <Route path=\"/users\" render={() => <UsersPage />} />\n                  <Route path=\"/login\" render={() => <Login />} />\n                  <Route path=\"/chat\" render={() => <ChatPage />} />\n                  <Route path=\"*\" render={() => <div>404 NOT FOUND</div>} />\n                </Switch>\n              </Suspense>\n            </Content>\n          </Layout>\n        </Content>\n        <Footer style={{ textAlign: 'center' }}>\n          Ant Design ©2018 Created by Ant UED\n        </Footer>\n      </Layout>\n    );\n  }\n}\n\nconst mapStateToProps = (state: AppStateType) => ({\n  initialized: state.app.initialized,\n});\n\n// контейнер\nconst AppContainer = compose<FC | ComponentType>(\n  withRouter,\n  connect(mapStateToProps, { initializeApp })\n)(App);\n\n// еще контейнер для подключение стора, перенесено в этот файл чтобы сработал тест App.text.js\nconst ContainerApp: React.FC = () => (\n  // <BrowserRouter> - используется с Route\n  <BrowserRouter>\n    <QueryParamProvider ReactRouterRoute={Route}>\n      <Provider store={store}>\n        <AppContainer />\n      </Provider>\n    </QueryParamProvider>\n  </BrowserRouter>\n);\n\nexport default ContainerApp;\n\n// types\ntype PropsType = ReturnType<typeof mapStateToProps>;\ntype DispatchPropsType = {\n  initializeApp: () => void;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\nimport SamuraiApp from './App';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<SamuraiApp />, document.getElementById('root'));\n\nserviceWorker.unregister();\n","import React from 'react';\nimport { Field, WrappedFieldProps } from 'redux-form';\nimport styles from './FormControls.module.css';\nimport { FieldValidatorType } from '../../../utils/validators/validators';\n\n// Types\ntype FormControlPropsTypes = {\n  touched: boolean;\n  error?: any;\n  element: React.ReactNode;\n};\ntype FormAdditionalTypes = {\n  placeholder: string | undefined;\n  type: 'password' | 'checkbox';\n};\nexport type GetStringKeys<T> = Extract<keyof T, string>;\n\nconst FormControl: React.FC<FormControlPropsTypes> = ({\n  element,\n  touched,\n  error,\n}) => {\n  const hasError = touched && error;\n  return (\n    <div className={hasError ? styles.error : ''}>\n      {element}\n      {hasError && <div>{error}</div>}\n    </div>\n  );\n};\n\nexport const Textarea: React.FC<WrappedFieldProps & FormAdditionalTypes> = ({\n  input,\n  meta,\n  placeholder,\n  type,\n}) => {\n  const element = React.createElement('textarea', {\n    ...input,\n    placeholder,\n    type,\n  });\n  return <FormControl {...meta} element={element} />;\n};\nexport const Input: React.FC<WrappedFieldProps & FormAdditionalTypes> = ({\n  input,\n  meta,\n  placeholder,\n  type,\n}) => {\n  const element = React.createElement('input', { ...input, placeholder, type });\n  return <FormControl {...meta} element={element} />;\n};\n\n// в FormKeysType могут попасть только определенные типы только строк\nexport function CreateField<FormKeysType extends string>(\n  placeholder: string | undefined,\n  name: FormKeysType,\n  validators: Array<FieldValidatorType>,\n  component: React.FC<WrappedFieldProps & FormAdditionalTypes>,\n  // сложная типизации component, прокидываю вручную тип для placeholder и type, потому что это мной выдуманные пропсы а не стандарнтные\n  props = { type: 'text' },\n  additionalText?: string,\n  className?: string\n) {\n  return (\n    <div className={className}>\n      <Field\n        name={name}\n        placeholder={placeholder}\n        component={component}\n        validate={validators}\n        {...props}\n      />\n      {additionalText && <span>{additionalText}</span>}\n    </div>\n  );\n}\n","import { AppStateType } from './redux-store';\n\n// userPage\nexport const getUsers = ({ usersPage }: AppStateType) => usersPage.users;\nexport const getPageSize = ({ usersPage }: AppStateType) => usersPage.pageSize;\nexport const getTotalUsersCount = ({ usersPage }: AppStateType) =>\n  usersPage.totalUsersCount;\nexport const getCurrentPage = ({ usersPage }: AppStateType) =>\n  usersPage.currentPage;\nexport const getIsFetching = ({ usersPage }: AppStateType) =>\n  usersPage.isFetching;\nexport const getFollowingInProgress = ({ usersPage }: AppStateType) =>\n  usersPage.followingInProgress;\nexport const getTerm = ({ usersPage }: AppStateType) => usersPage.term;\nexport const getIsFriends = ({ usersPage }: AppStateType) =>\n  usersPage.isFriends;\n\n// auth\nexport const selectCaptchaUrl = ({ auth }: AppStateType) => auth.captchaUrl;\nexport const selectIsAuth = ({ auth }: AppStateType) => auth.isAuth;\nexport const selectLogin = ({ auth }: AppStateType) => auth.login;\n","export type FieldValidatorType = (value: string) => string | undefined;\n\nexport const required: FieldValidatorType = (value) => {\n  if (value) return undefined;\n  return 'Field is required';\n};\n\nexport const requiredMaxLength =\n  (maxLength: number): FieldValidatorType =>\n  (value) => {\n    if (value && value.length > maxLength) {\n      return `Max length is ${maxLength} symbols`;\n    }\n    return undefined;\n  };\n"],"sourceRoot":""}