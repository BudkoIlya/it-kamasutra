{"version":3,"sources":["components/hoc/withAuthRedirect.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","assets/img/user.png","components/Profile/MyPosts/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/MyPosts/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/MyPosts/ProfileInfo/ProfileDataForm.tsx","components/Profile/MyPosts/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","to","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","module","exports","ProfileStatusWithHooks","status","updateStatus","useState","editMode","setEditMode","newStatus","setStatus","useEffect","autoFocus","onBlur","onChange","target","onDoubleClick","ProfileDataFormRedux","reduxForm","form","isOwner","handleSubmit","profile","onSubmit","type","CreateField","Input","Textarea","entries","contacts","map","contact","idx","String","ProfileData","handleToggleMode","className","classes","descriptionBlock","onClick","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","contactTitle","Contacts","store","isFetching","usersPage","savePhoto","saveProfile","alt","src","photos","large","userPhoto","mainPhoto","files","initialValues","formData","then","catch","error","console","Post","message","id","likeCounts","item","like","maxLength","requiredMaxLength","MyPosts","React","memo","posts","addPost","postsElements","p","postBlock","AddMessagePostRedux","newPostBody","required","MyPostsContainer","profilePage","actions","addPostActionCreator","Profile","props","ProfileContainer","refreshProfile","match","getUsersProfile","authorizedUserId","userId","params","Number","this","prevProps","Component","compose","getUsersProfileThunk","setStatusThunk","updateStatusThunk","savePhotoThunk","saveProfileThunk","withRouter"],"mappings":"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","file":"static/js/4.502c2d99.chunk.js","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { AppStateType } from '../../redux/redux-store';\n\nconst mapStateToPropsForRedirect = (state: AppStateType) => ({\n  isAuth: state.auth.isAuth,\n});\n\nexport function withAuthRedirect(\n  WrappedComponent: React.FC | React.ComponentType\n) {\n  const RedirectComponent = ({ isAuth }: MapStateToPropsType) => {\n    if (!isAuth) return <Redirect to=\"/login\" />;\n    return <WrappedComponent />;\n  };\n  return connect<MapStateToPropsType, object, object, AppStateType>(\n    mapStateToPropsForRedirect\n  )(RedirectComponent);\n}\n\n// types\ninterface MapStateToPropsType {\n  isAuth: boolean;\n}\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default __webpack_public_path__ + \"static/media/user.fedbf887.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__ZQdBa\",\"mainPhoto\":\"ProfileInfo_mainPhoto__Eqq0v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBlock\":\"MyPosts_postBlock__B5WUn\",\"posts\":\"MyPosts_posts__1zYug\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__1mTAw\",\"message\":\"Post_message__32ATX\",\"like\":\"Post_like__rrZ6F\"};","import React, { useState, useEffect, ChangeEvent } from 'react';\n\nconst ProfileStatusWithHooks: React.FC<PropsType> = ({\n  status,\n  updateStatus,\n}) => {\n  const [editMode, setEditMode] = useState(false);\n  const [newStatus, setStatus] = useState(status);\n\n  useEffect(() => {\n    setStatus(status);\n  }, [status]);\n\n  const activateEditMode = () => {\n    setEditMode(true);\n  };\n  const deactivateEditMode = () => {\n    setEditMode(false);\n    updateStatus(newStatus);\n  };\n  const setValueStatus = ({ target }: ChangeEvent<HTMLInputElement>) => {\n    setStatus(target.value);\n  };\n  return (\n    <>\n      {!editMode ? (\n        <div>\n          <b>Status:</b>\n          <span onDoubleClick={activateEditMode}>\n            {status || 'добавить статус'}\n          </span>\n        </div>\n      ) : (\n        <div>\n          <input\n            autoFocus\n            onBlur={deactivateEditMode}\n            value={newStatus}\n            onChange={setValueStatus}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ProfileStatusWithHooks;\n\n// Types\ntype PropsType = {\n  status: string;\n  updateStatus: (status: string) => void;\n};\n","import React from 'react';\nimport { InjectedFormProps, reduxForm } from 'redux-form';\nimport { ProfileType } from '../../../../types/types';\nimport {\n  CreateField,\n  GetStringKeys,\n  Input,\n  Textarea,\n} from '../../../common/FormsControls/FormsControls';\n\nconst ProfileDataForm: React.FC<\n  InjectedFormProps<ProfileType, PropsType> & PropsType\n> = ({ isOwner, handleSubmit, profile }) => (\n  <form onSubmit={handleSubmit}>\n    {isOwner && (\n      <div>\n        <button type=\"submit\">Save</button>\n      </div>\n    )}\n    <div>\n      <b>Full name </b>:{' '}\n      {CreateField<LoginFormValuesTypeKeys>('Full name', 'fullName', [], Input)}\n    </div>\n    <div>\n      <b>Looking for a job</b>:{' '}\n      {CreateField<LoginFormValuesTypeKeys>('', 'lookingForAJob', [], Input, {\n        type: 'checkbox',\n      })}\n    </div>\n    <div>\n      <b>My Professional skills</b>\n      {CreateField<LoginFormValuesTypeKeys>(\n        'My Professional skills',\n        'lookingForAJobDescription',\n        [],\n        Textarea\n      )}\n    </div>\n    <div>\n      <b>About me</b>:{' '}\n      {CreateField<LoginFormValuesTypeKeys>(\n        'About me',\n        'aboutMe',\n        [],\n        Textarea\n      )}\n    </div>\n    <div>\n      <b>Contacts</b>:\n      {Object.entries(profile.contacts).map((contact, idx) => (\n        <div key={String(idx)}>\n          {/* если писать имя через точку это указывает вложенность объекта для redux form */}\n          {/* todo: create some solution for embedded objects `contacts.${contact[0]}` */}\n          {contact[0]}:{' '}\n          {CreateField('Enter contact', `contacts.${contact[0]}`, [], Input)}\n        </div>\n      ))}\n    </div>\n  </form>\n);\n\nconst ProfileDataFormRedux = reduxForm<ProfileType, PropsType>({\n  form: 'profileEdit',\n})(ProfileDataForm);\n\nexport default ProfileDataFormRedux;\n\n// Types\ntype PropsType = {\n  isOwner: boolean;\n  profile: ProfileType;\n};\n\ntype LoginFormValuesTypeKeys = GetStringKeys<ProfileType>;\n","import React, { ChangeEvent, useState } from 'react';\nimport { connect } from 'react-redux';\nimport classes from './ProfileInfo.module.css';\nimport Preloader from '../../../common/preloader/preloader';\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\nimport userPhoto from '../../../../assets/img/user.png';\nimport ProfileDataForm from './ProfileDataForm';\nimport { ProfileType } from '../../../../types/types';\nimport { AppStateType } from '../../../../redux/redux-store';\n\nconst ProfileInfo: React.FC<ProfileInfoPropsT & MapStateToPropsT> = ({\n  profile,\n  status,\n  updateStatus,\n  isFetching,\n  isOwner,\n  savePhoto,\n  saveProfile,\n}) => {\n  const handlePhotoSelected = ({ target }: ChangeEvent<HTMLInputElement>) =>\n    target.files?.length && savePhoto(target.files[0]);\n  const [editMode, setEditMode] = useState(false);\n\n  const onSubmit = (formData: ProfileType) => {\n    // todo: remove then\n    saveProfile(formData)\n      .then(() => {\n        setEditMode(false);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n\n  return (\n    <div>\n      {!profile ? (\n        <Preloader isFetching={isFetching} />\n      ) : (\n        <div className={classes.descriptionBlock}>\n          <img\n            alt=\"profileImg\"\n            src={profile.photos.large || userPhoto}\n            className={classes.mainPhoto}\n          />\n          {isOwner && <input type=\"file\" onChange={handlePhotoSelected} />}\n          {/* initialValues - устанавливает значения в поля автоматически если совпадают имена свойст и полей */}\n          {editMode ? (\n            <ProfileDataForm\n              initialValues={profile}\n              profile={profile}\n              onSubmit={onSubmit}\n              isOwner={isOwner}\n            />\n          ) : (\n            <ProfileData\n              profile={profile}\n              isOwner={isOwner}\n              handleToggleMode={() => setEditMode(true)}\n            />\n          )}\n          <ProfileStatusWithHooks status={status} updateStatus={updateStatus} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ProfileData: React.FC<ProfileDataTypes> = ({\n  profile,\n  isOwner,\n  handleToggleMode,\n}) => (\n  <div className={classes.descriptionBlock}>\n    {isOwner && (\n      <div>\n        <button type=\"button\" onClick={handleToggleMode}>\n          Edit\n        </button>\n      </div>\n    )}\n    <div>\n      <b>Full name </b>: {profile.fullName}\n    </div>\n    <div>\n      <b>Looking for a job</b>: {profile.lookingForAJob ? 'yes' : 'no'}\n    </div>\n    {profile.lookingForAJob && (\n      <div>\n        <b>My Professional skills</b>: {profile.lookingForAJobDescription}\n      </div>\n    )}\n    <div>\n      <b>About me</b>: {profile.aboutMe}\n    </div>\n    <div>\n      <b>Contacts</b>:\n      {Object.entries(profile.contacts).map((contact, idx) => (\n        <Contacts\n          key={String(idx)}\n          contactTitle={contact[0]}\n          value={contact[1]}\n        />\n      ))}\n    </div>\n  </div>\n);\n\nconst Contacts: React.FC<ContactsType> = ({ contactTitle, value }) => (\n  <div>\n    {contactTitle}: {value}\n  </div>\n);\nconst MapStateToProps = (store: AppStateType) => ({\n  isFetching: store.usersPage.isFetching,\n});\n\nexport default connect(MapStateToProps)(ProfileInfo);\n\n// Types\nexport type ProfileInfoPropsT = {\n  profile: ProfileType | null;\n  status: string;\n  updateStatus: (status: string) => void;\n  isOwner: boolean;\n  savePhoto: (photo: File) => void;\n  saveProfile: (newProfileData: ProfileType) => Promise<void>;\n};\n\ntype MapStateToPropsT = {\n  isFetching: boolean;\n};\n\ntype ProfileDataTypes = {\n  isOwner: boolean;\n  profile: ProfileType;\n  handleToggleMode: () => void;\n};\n\ntype ContactsType = {\n  contactTitle: string;\n  value: string;\n};\n","import React from 'react';\nimport classes from './Post.module.css';\nimport { PostsType } from '../../../../types/types';\n\nconst Post: React.FC<PostsType> = ({ message, id, likeCounts }) => (\n  <div className={classes.item}>\n    <div className={classes.message}>\n      <div>\n        <img\n          src=\"https://i.pinimg.com/originals/2d/0f/50/2d0f50e8e4f6b233c7cf70b4bd36f89c.png\"\n          alt=\"\"\n        />\n      </div>\n      <p>{message}</p>\n    </div>\n    <span id={String(id)} className={classes.like}>\n      {`Likes : ${likeCounts}`}\n    </span>\n  </div>\n);\nexport default Post;\n","import React from 'react';\nimport { reduxForm, InjectedFormProps } from 'redux-form';\nimport classes from './MyPosts.module.css';\nimport Post from './Post/Post';\nimport {\n  required,\n  requiredMaxLength,\n} from '../../../utils/validators/validators';\nimport {\n  CreateField,\n  GetStringKeys,\n  Textarea,\n} from '../../common/FormsControls/FormsControls';\nimport { PostsType } from '../../../types/types';\n\nconst maxLength = requiredMaxLength(30);\n\n// оптимизация приложения React.memo(внутри реализован аналог классового метода ShouldComponentUpdate)\nconst MyPosts: React.FC<PropsType> = React.memo(({ posts, addPost }) => {\n  const postsElements = posts.map((p) => (\n    <Post message={p.message} likeCounts={p.likeCounts} key={p.id} id={p.id} />\n  ));\n\n  const onAddPost = (formData: LoginFormValuesType) => {\n    addPost(formData.newPostBody);\n  };\n  return (\n    <div className={classes.postBlock}>\n      <h3>My posts</h3>\n      <div>\n        {/* onSubmit={onAddPost} - автоматически прокидывает этот сабмит в handleSubmit(обязательно имя onSubmit) */}\n        <AddMessagePostRedux onSubmit={onAddPost} />\n      </div>\n      <div className={classes.posts}>{postsElements}</div>\n    </div>\n  );\n});\n\nconst AddMessagePost: React.FC<InjectedFormProps<LoginFormValuesType>> = ({\n  handleSubmit,\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      {CreateField<LoginFormValuesTypeKeys>(\n        'add post',\n        'newPostBody',\n        [required, maxLength],\n        Textarea\n      )}\n    </div>\n    <div>\n      <button type=\"submit\">Add post</button>\n    </div>\n  </form>\n);\n\nconst AddMessagePostRedux = reduxForm<LoginFormValuesType>({ form: 'addPost' })(\n  AddMessagePost\n);\n\nexport default MyPosts;\n\n// types\ntype LoginFormValuesType = {\n  newPostBody: PostsType;\n};\n\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormValuesType>;\n\nexport type MapStateToPropsType = {\n  posts: Array<PostsType>;\n};\nexport type MapDispatchToProps = {\n  addPost: (newPostBody: PostsType) => void;\n};\ntype PropsType = MapStateToPropsType & MapDispatchToProps;\n","import { connect } from 'react-redux';\nimport MyPosts, { MapDispatchToProps, MapStateToPropsType } from './MyPosts';\nimport { actions } from '../../../redux/profile-reducer';\nimport { AppStateType } from '../../../redux/redux-store';\n\n// Передаём часть state для MyPostsContainer в props'ах\nconst mapStateToProps = ({\n  profilePage,\n}: Pick<AppStateType, 'profilePage'>) => ({\n  posts: profilePage.posts,\n});\n// Создаётся связь с компонентой MyPosts, создавая новую компоненту(контейнер) содержащую store, которая рендерит MyPosts\nconst MyPostsContainer = connect<\n  MapStateToPropsType,\n  MapDispatchToProps,\n  object,\n  AppStateType\n>(mapStateToProps, {\n  addPost: actions.addPostActionCreator,\n})(MyPosts);\n\nexport default MyPostsContainer;\n","import React from 'react';\nimport ProfileInfo, {\n  ProfileInfoPropsT,\n} from './MyPosts/ProfileInfo/ProfileInfo';\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\n\nconst Profile: React.FC<ProfileInfoPropsT> = (props) => (\n  <div>\n    <ProfileInfo {...props} />\n    <MyPostsContainer />\n  </div>\n);\nexport default Profile;\n","import React, { ComponentType, FC } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { compose } from 'redux';\nimport Profile from './Profile';\nimport {\n  getUsersProfileThunk,\n  savePhotoThunk,\n  setStatusThunk,\n  updateStatusThunk,\n  saveProfileThunk,\n} from '../../redux/profile-reducer';\nimport { withAuthRedirect } from '../hoc/withAuthRedirect';\nimport { AppStateType } from '../../redux/redux-store';\nimport { ProfileType } from '../../types/types';\n\nclass ProfileContainer extends React.Component<PropsType> {\n  componentDidMount() {\n    this.refreshProfile();\n  }\n\n  componentDidUpdate(prevProps: PropsType) {\n    // userId прокидывается в params с помощью <NavLink to={`/profile/${user.id}`}> в User\n    const {\n      match: {\n        params: { userId },\n      },\n    } = this.props;\n    const prevUserId = prevProps.match.params.userId;\n    if (prevUserId !== userId) {\n      // debugger; - проверка мой ли выбран профиль либо чей-то другой, при загрузке компонеты должен отображаться мой профиль\n      this.refreshProfile();\n    }\n  }\n\n  refreshProfile = () => {\n    const { match, getUsersProfile, setStatus, authorizedUserId } = this.props;\n    let { userId } = match.params; // userId произвольное название выставляется в App.ts в <Route path = ''/> приходит ввиде СТРОКИ\n    if (!userId) userId = String(authorizedUserId); // если нет в url значения id поумолчанию отображаем 2(в дальнейшем изменим на сой профиль )\n    // Авторизируемся и получаем данные этого пользователя в state\n    // todo: сервак требует числа, в парамсах приходит строка <Route path='/profile/:userId?'/>\n    getUsersProfile(Number(userId));\n    setStatus(Number(userId));\n  };\n\n  render() {\n    const { profile, status, updateStatus, savePhoto, match, saveProfile } =\n      this.props;\n    return (\n      <Profile\n        savePhoto={savePhoto}\n        isOwner={!match.params.userId} // userId - если есть, то значит я не владелец страницы\n        profile={profile}\n        status={status}\n        updateStatus={updateStatus}\n        saveProfile={saveProfile}\n      />\n    );\n  }\n}\nconst mapStateToProps = ({\n  profilePage,\n  auth,\n}: AppStateType): MapStateToPropsT => ({\n  profile: profilePage.profile,\n  status: profilePage.status,\n  authorizedUserId: auth.userId,\n  isAuth: auth.isAuth,\n});\nexport default compose<FC | ComponentType>(\n  withAuthRedirect, // hoc для ридеректа\n  connect(mapStateToProps, {\n    getUsersProfile: getUsersProfileThunk,\n    setStatus: setStatusThunk,\n    updateStatus: updateStatusThunk,\n    savePhoto: savePhotoThunk,\n    saveProfile: saveProfileThunk,\n  }),\n  withRouter\n)(ProfileContainer);\n\n// types\ntype MapStateToPropsT = {\n  profile: ProfileType | null;\n  status: string;\n  authorizedUserId: number | null;\n  isAuth: boolean;\n};\n\ntype MapDispatchToPropsT = {\n  getUsersProfile: (userId: number) => void;\n  setStatus: (userId: number) => void;\n  updateStatus: (status: string) => void;\n  savePhoto: (photo: File) => void;\n  saveProfile: (newProfileData: ProfileType) => Promise<void>;\n};\ntype MatchParams = {\n  userId: string;\n};\n\ntype PropsType = MapStateToPropsT &\n  MapDispatchToPropsT &\n  RouteComponentProps<MatchParams>;\n"],"sourceRoot":""}