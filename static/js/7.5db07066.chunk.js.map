{"version":3,"sources":["components/hoc/withAuthRedirect.tsx","components/Dialogs/Dialogs.module.css","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/Message/Message.tsx","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","to","module","exports","DialogItem","id","name","path","exact","className","classes","dialog","activeClassName","active","Message","message","maxLength","requiredMaxLength","AddMessageFormRedux","reduxForm","form","handleSubmit","onSubmit","CreateField","required","Textarea","type","Dialogs","dialogsPage","sendMessages","dialogsElements","dialogs","map","d","messagesElements","messages","m","dialogsItems","value","newMessageBody","compose","actions"],"mappings":"kHAAA,kEAKMA,EAA6B,SAACC,GAAD,MAA0B,CAC3DC,OAAQD,EAAME,KAAKD,SAGd,SAASE,EACdC,GAMA,OAAOC,YACLN,EADKM,EAJmB,SAAC,GACzB,OAD6D,EAAlCJ,OAEpB,cAACG,EAAD,IADa,cAAC,IAAD,CAAUE,GAAG,gB,oBCZrCC,EAAOC,QAAU,CAAC,QAAU,yBAAyB,aAAe,8BAA8B,SAAW,0BAA0B,OAAS,wBAAwB,OAAS,0B,oHCqBlKC,EAjB4B,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,GAAIC,EAAW,EAAXA,KAC1CC,EAAI,mBAAeF,GACzB,OACE,8BAEE,cAAC,IAAD,CACEG,OAAK,EACLC,UAAWC,IAAQC,OACnBV,GAAIM,EACJK,gBAAiBF,IAAQG,OAJ3B,SAMGP,OCVMQ,EAJgC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OAC7C,8BAAMA,K,gBCMFC,EAAYC,YAAkB,IA6C9BC,EAAsBC,YAA8B,CACxDC,KAAM,wBADoBD,EAlB4C,SAAC,GAAD,IACtEE,EADsE,EACtEA,aADsE,OAGtE,uBAAMC,SAAUD,EAAhB,UACE,8BACGE,YACC,oGACA,iBACA,CAACC,IAAUR,GACXS,OAGJ,8BACE,wBAAQC,KAAK,SAAb,4EASSC,EA/CyB,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,YAAaC,EAAmB,EAAnBA,aAChDC,EAAkBF,EAAYG,QAAQC,KAAI,SAACC,GAAD,OAC9C,cAAC,EAAD,CAAY3B,KAAM2B,EAAE3B,KAAiBD,GAAI4B,EAAE5B,IAAZ4B,EAAE5B,OAE7B6B,EAAmBN,EAAYO,SAASH,KAAI,SAACI,GAAD,OAChD,cAAC,EAAD,CAASrB,QAASqB,EAAErB,SAAcqB,EAAE/B,OAMtC,OACE,sBAAKI,UAAWC,IAAQqB,QAAxB,UACE,qBAAKtB,UAAWC,IAAQ2B,aAAxB,SAAuCP,IACvC,sBAAKrB,UAAWC,IAAQyB,SAAxB,UACE,8BAAMD,IACN,8BAEE,cAAChB,EAAD,CAAqBI,SAVF,SAACgB,GAC1BT,EAAaS,EAAMC,4B,kBCPRC,sBACb1C,IACAE,aANsB,SAACL,GAAD,MAA0B,CAChDiC,YAAajC,EAAMiC,eAKZ,eAAuBa,MAFjBD,CAGbb","file":"static/js/7.5db07066.chunk.js","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\nconst mapStateToPropsForRedirect = (state: AppStateType) => ({\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport function withAuthRedirect(\r\n  WrappedComponent: React.FC | React.ComponentType\r\n) {\r\n  const RedirectComponent = ({ isAuth }: MapStateToPropsType) => {\r\n    if (!isAuth) return <Redirect to=\"/login\" />;\r\n    return <WrappedComponent />;\r\n  };\r\n  return connect<MapStateToPropsType, object, object, AppStateType>(\r\n    mapStateToPropsForRedirect\r\n  )(RedirectComponent);\r\n}\r\n\r\n// types\r\ninterface MapStateToPropsType {\r\n  isAuth: boolean;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__yk5Qw\",\"dialogsItems\":\"Dialogs_dialogsItems__2HCKr\",\"messages\":\"Dialogs_messages__OzDC4\",\"active\":\"Dialogs_active__1Vf8Q\",\"dialog\":\"Dialogs_dialog__yFZSf\"};","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport classes from '../Dialogs.module.css';\r\nimport { MessagesType } from '../../../redux/dialogs-reducer';\r\n\r\nconst DialogItem: React.FC<MessagesType> = ({ id, name }) => {\r\n  const path = `/dialogs/${id}`;\r\n  return (\r\n    <div>\r\n      {/* to(для) - для такого-то пути применяем  - activeClassName  */}\r\n      <NavLink\r\n        exact\r\n        className={classes.dialog}\r\n        to={path}\r\n        activeClassName={classes.active}\r\n      >\r\n        {name}\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DialogItem;\r\n","import React from 'react';\r\n\r\nconst Message: React.FC<{ message: string }> = ({ message }) => (\r\n  <div>{message}</div>\r\n);\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport { InjectedFormProps, reduxForm } from 'redux-form';\r\nimport classes from './Dialogs.module.css';\r\nimport DialogItem from './DialogItem/DialogItem';\r\nimport Message from './Message/Message';\r\nimport { CreateField, Textarea } from '../common/FormsControls/FormsControls';\r\nimport { required, requiredMaxLength } from '../../utils/validators/validators';\r\nimport { InitialStateType } from '../../redux/dialogs-reducer';\r\n\r\nconst maxLength = requiredMaxLength(30);\r\n\r\nconst Dialogs: React.FC<OwmPropsType> = ({ dialogsPage, sendMessages }) => {\r\n  const dialogsElements = dialogsPage.dialogs.map((d) => (\r\n    <DialogItem name={d.name} key={d.id} id={d.id} />\r\n  ));\r\n  const messagesElements = dialogsPage.messages.map((m) => (\r\n    <Message message={m.message} key={m.id} />\r\n  ));\r\n\r\n  const onSendMessageClick = (value: NewMessageFormType) => {\r\n    sendMessages(value.newMessageBody);\r\n  };\r\n  return (\r\n    <div className={classes.dialogs}>\r\n      <div className={classes.dialogsItems}>{dialogsElements}</div>\r\n      <div className={classes.messages}>\r\n        <div>{messagesElements}</div>\r\n        <div>\r\n          {/* onSubmit={onAddPost} - автоматически прокидывает этот сабмит в handleSubmit(обязательно имя onSubmit) */}\r\n          <AddMessageFormRedux onSubmit={onSendMessageClick} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AddMessageForm: React.FC<InjectedFormProps<NewMessageFormType>> = ({\r\n  handleSubmit,\r\n}) => (\r\n  <form onSubmit={handleSubmit}>\r\n    <div>\r\n      {CreateField<keyof NewMessageFormType>(\r\n        'Введите сообщение',\r\n        'newMessageBody',\r\n        [required, maxLength],\r\n        Textarea\r\n      )}\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">Отправить</button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nconst AddMessageFormRedux = reduxForm<NewMessageFormType>({\r\n  form: 'dialogAddMessageForm',\r\n})(AddMessageForm);\r\n\r\nexport default Dialogs;\r\n\r\n// types\r\ntype OwmPropsType = {\r\n  dialogsPage: InitialStateType;\r\n  sendMessages: (newMessageBody: string) => void;\r\n};\r\ntype NewMessageFormType = {\r\n  newMessageBody: string;\r\n};\r\n","import { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { ComponentType, FC } from 'react';\r\nimport Dialogs from './Dialogs';\r\nimport { actions } from '../../redux/dialogs-reducer';\r\nimport { withAuthRedirect } from '../hoc/withAuthRedirect';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\n// Передаём часть state для DialogsContainer\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n  dialogsPage: state.dialogsPage,\r\n});\r\n\r\nexport default compose<FC | ComponentType>(\r\n  withAuthRedirect, // hoc для ридеректа\r\n  connect(mapStateToProps, { ...actions })\r\n)(Dialogs);\r\n"],"sourceRoot":""}